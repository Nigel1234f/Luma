<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Luma - Tu compañera emocional</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&family=Comfortaa&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Comfortaa', cursive;
      background: linear-gradient(to bottom, #e9e4f0, #d3cce3);
      color: #3a2b47;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 2rem;
      transition: background 0.5s;
    }
    h1 {
      color: #8e44ad;
      font-size: 2.2rem;
      text-align: center;
      animation: fadeIn 1s ease-in;
    }
    .container {
      max-width: 600px;
      width: 100%;
      text-align: center;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 1.5rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      padding: 2rem;
      backdrop-filter: blur(10px);
    }
    .button-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-top: 2rem;
    }
    button {
      padding: 1rem;
      border: none;
      border-radius: 1rem;
      background-color: #c49dd3;
      color: white;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, background-color 0.3s;
    }
    button:hover {
      background-color: #a678b4;
      transform: scale(1.05);
    }
    .response, .chatbot {
      margin-top: 2rem;
      padding: 1.5rem;
      background-color: #f6edf8;
      border-radius: 1rem;
      display: none;
      animation: fadeIn 0.5s ease-in;
    }
    .back-button {
      margin-top: 1rem;
      background-color: #8e44ad;
      color: white;
      padding: 0.7rem 1rem;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
    }
    .breathing-circle {
      margin: 1rem auto;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background-color: #c49dd3;
      animation: breathe 6s ease-in-out infinite;
    }
    .chat-input {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .chat-input input {
      padding: 0.7rem;
      border-radius: 0.5rem;
      border: 1px solid #ccc;
    }
    .chat-input button {
      background: #a678b4;
      color: white;
      padding: 0.7rem;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
    }
    #chatbox {
      max-height: 200px;
      overflow-y: auto;
      text-align: left;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes breathe {
      0%, 100% { transform: scale(1); opacity: 0.7; }
      50% { transform: scale(1.3); opacity: 1; }
    }
  </style>
</head>
<body>
  <audio autoplay loop id="bgMusic">
    <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_d4b80a8b93.mp3" type="audio/mpeg">
  </audio>
  <div class="container">
    <h1>Hola, soy <strong>Luma</strong><br />¿Cómo te sientes hoy?</h1>

    <div class="button-grid">
      <button onclick="showResponse('ansiedad')">Ansioso/a</button>
      <button onclick="showResponse('tristeza')">Triste</button>
      <button onclick="showResponse('estres')">Estresado/a</button>
      <button onclick="showResponse('soledad')">Solo/a</button>
      <button onclick="showResponse('desmotivacion')">Desmotivado/a</button>
      <button onclick="showResponse('sueño')">No puedo dormir</button>
    </div>

    <div id="response" class="response">
      <div id="response-text"></div>
      <div id="breathing" style="display:none">
        <div class="breathing-circle"></div>
        <p>Respira conmigo... inhalamos... exhalamos...</p>
      </div>
      <button class="back-button" onclick="goBack()">Volver</button>
    </div>

    <div id="chatbot" class="chatbot">
      <p><strong>¿Quieres hablar de cómo te sientes?</strong><br />Escribe aquí lo que quieras compartir, Luma está para escucharte</p>
      <div id="chatbox"></div>
      <div class="chat-input">
        <input type="text" id="chatInput" placeholder="Escribe cómo te sientes o lo que estás pensando...">
        <button onclick="sendMessage()">Enviar</button>
      </div>
    </div>



<script>
  const responses = {
    ansiedad: {
      texts: [
        "Es normal sentir ansiedad, pero no estás solo en esto.",
        "Respira profundamente. Estás a salvo en este momento.",
        "Enfócate en lo que puedes controlar y suelta lo que no.",
        "Eres más fuerte de lo que crees. Esto también pasará."
      ],
      breathing: true
    },
    tristeza: {
      texts: [
        "Está bien no estar bien. Date permiso para sentir.",
        "Tu tristeza es válida. No la ignores, escúchala.",
        "Busca consuelo en lo que amas, aunque sea algo pequeño.",
        "Lo que sientes ahora no define tu futuro. La calma volverá."
      ],
      breathing: false
    },
    estres: {
      texts: [
        "Haz una pausa. Tu mente y cuerpo necesitan descansar.",
        "A veces el mejor paso es detenerte y respirar.",
        "Prioriza tu paz mental por encima del ruido externo.",
        "Estás haciendo lo mejor que puedes, y eso es suficiente."
      ],
      breathing: true
    },
    soledad: {
      texts: [
        "Tu valor no depende de la compañía. Ya eres suficiente.",
        "Hablar con alguien puede ayudarte a sentirte acompañado.",
        "Conecta contigo mismo, ahí también habita la calma.",
        "Esta sensación pasará. Mereces afecto y cercanía."
      ],
      breathing: false
    },
    desmotivacion: {
      texts: [
        "No todos los días pueden ser productivos, y eso está bien.",
        "Tu esfuerzo tiene valor, aunque no lo veas aún.",
        "Recuerda por qué empezaste y honra tu proceso.",
        "Incluso un pequeño paso es una señal de avance."
      ],
      breathing: false
    },
    sueño: {
      texts: [
        "Trata de crear una rutina de descanso que te relaje.",
        "Evita luces fuertes y distracciones antes de dormir.",
        "Puedes escribir lo que te preocupa para calmar la mente.",
        "El descanso es esencial. Mereces dormir en paz."
      ],
      breathing: true
    }
  };

  let responseIndex = 0;
  let responseTimer;

  function showResponse(feeling) {
    document.querySelector('.button-grid').style.display = 'none';
    document.getElementById('chatbot').style.display = 'block';
    document.getElementById('chatbox').innerHTML = ''; // limpiar chat
    const content = responses[feeling];
    const responseDiv = document.getElementById('response-text');
    responseDiv.innerHTML = '';
    responseIndex = 0;

    function showNextLine() {
      if (responseIndex < content.texts.length) {
        responseDiv.innerHTML = `<p>${content.texts[responseIndex]}</p>`;
        responseIndex++;
        responseTimer = setTimeout(showNextLine, 4000);
      }
    }

    showNextLine();
    document.getElementById('response').style.display = 'block';
    document.getElementById('breathing').style.display = content.breathing ? 'block' : 'none';
  }

  function goBack() {
    clearTimeout(responseTimer);
    document.getElementById('response').style.display = 'none';
    document.getElementById('breathing').style.display = 'none';
    document.querySelector('.button-grid').style.display = 'grid';
    document.getElementById('chatbot').style.display = 'none';
    document.getElementById('response-text').innerHTML = '';
    document.getElementById('chatbox').innerHTML = ''; // limpiar chat al volver
  }

  function sendMessage() {
    const input = document.getElementById('chatInput');
    const chatbox = document.getElementById('chatbox');
    const userText = input.value.trim();
    if (userText === '') return;

    const userMsg = document.createElement('div');
    userMsg.className = 'bubble user';
    userMsg.textContent = `Tú: ${userText}`;
    chatbox.appendChild(userMsg);

    input.value = '';
    chatbox.scrollTop = chatbox.scrollHeight;

    const typingIndicator = document.createElement('div');
    typingIndicator.className = 'bubble luma typing';
    typingIndicator.textContent = 'Luma está escribiendo...';
    chatbox.appendChild(typingIndicator);
    chatbox.scrollTop = chatbox.scrollHeight;

    setTimeout(() => {
      typingIndicator.remove();

      const botMsg = document.createElement('div');
      botMsg.className = 'bubble luma';
      botMsg.textContent = generateResponse(userText);
      chatbox.appendChild(botMsg);
      chatbox.scrollTop = chatbox.scrollHeight;
    }, 1500);
  }

  function generateResponse(message) {
    const msg = message.toLowerCase();
    if (msg.includes("ansiedad") || msg.includes("ansioso")) {
      return "La ansiedad puede sentirse abrumadora, pero estoy aquí para ayudarte a calmarte. Respira conmigo... estás a salvo.";
    } else if (msg.includes("triste") || msg.includes("tristeza")) {
      return "Siento que estés triste. Está bien sentirlo, y me alegra que estés hablando de ello. Estoy contigo.";
    } else if (msg.includes("estres") || msg.includes("estresado")) {
      return "El estrés puede ser muy pesado. Quizás podrías tomarte unos minutos para ti. ¿Quieres intentar un ejercicio de respiración?";
    } else if (msg.includes("solo") || msg.includes("soledad")) {
      return "La soledad puede doler, pero aquí estoy contigo. A veces solo necesitamos sentirnos escuchados. Estoy aquí para eso.";
    } else if (msg.includes("sueño") || msg.includes("dormir")) {
      return "Dormir bien es importante. ¿Has intentado dejar el celular unos minutos antes de acostarte? Puede ayudarte a relajar la mente.";
    } else if (msg.includes("miedo") || msg.includes("temor")) {
      return "El miedo es válido, y enfrentarlo ya es un paso enorme. No estás solo/a, y puedes contar conmigo.";
    } else {
      return "Gracias por contarme eso. Me encantaría seguir escuchándote, todo lo que digas es importante para mí.";
    }
  }
</script>

</body>
</html>